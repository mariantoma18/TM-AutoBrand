<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Cart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://scripts.sirv.com/sirvjs/v3/sirv.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">

    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/section.css">
    <link rel="stylesheet" href="/css/buttons.css">
    <link rel="stylesheet" href="/css/images.css">
    <link rel="stylesheet" href="/css/logo.css">
    <link rel="stylesheet" href="/css/table.css">

</head>
<body>

<div class="w3-sidebar w3-bar-block w3-border-right left-side-bar" style="display:none" id="mySidebar">
    <button onclick="w3_close()" class="w3-bar-item w3-large" style="background-color: black; color: #BFA181">Close
        &times;
    </button>
    <button onclick="window.location.href='/consumption'" class="side-bar-button">Consumption</button>
    <button onclick="window.location.href='/models'" class="side-bar-button">Models</button>
    <button onclick="window.location.href='/login'" class="side-bar-button">Log In</button>
</div>

<div class="side-bar">
    <button class="side-bar-navigation-button" onclick="w3_open()">â˜°</button>

    <button onclick="window.location.href='/configurator'" class="side-bar-button">Configurator</button>
    <button onclick="window.location.href='/service'" class="side-bar-button">Service</button>
    <button onclick="window.location.href='/testDrive'" class="side-bar-button">Test-Drive</button>

    <a href="/">
        <img class="logo-img" src="/images/TM-logo-white.png" alt="TM">
    </a>

    <button onclick="window.location.href='/accessories'" class="side-bar-button">Accessories</button>
    <button onclick="window.location.href='/discoverUs'" class="side-bar-button">Discover our history</button>
    <button onclick="window.location.href='/contact'" class="side-bar-button">Contact</button>

    <button onclick="window.location.href='/cart/view'" class="side-bar-cart-button"><i class="bi bi-cart4"></i></button>
</div>

<div class="main-div">
    <div class="consumption-page-text-section">
        <div class="text-block">
            <h2>Your Cart</h2>
            <table class="cart-table">
                <thead>
                <tr>
                    <th>Product Image</th>
                    <th>Product Name</th>
                    <th>Quantity</th>
                    <th>Delete</th>
                    <th>Price</th>
                </tr>
                </thead>
                <tbody>

                <tr th:each="item : ${cart.items}">
                    <td><img th:src="@{${item.accessory.imageUrl}}" alt=""
                             style="width: 50px; height: 50px;" src=""></td>
                    <td th:text="${item.accessory.name}"></td>
                    <td>
                        <form th:action="@{/cart/updateQuantity}" method="post">
                            <input type="hidden" name="itemId" th:value="${item.id}">
                            <input type="number" name="quantity" th:value="${item.quantity}" min="1" style="width: 40px;">
                            <button type="submit" class="btn btn-outline-warning"><i class="bi bi-arrow-clockwise"></i></button>
                        </form>
                    </td>
                    <td>
                        <form th:action="@{/cart/delete}" method="post">
                            <input type="hidden" name="itemId" th:value="${item.id}">
                            <button type="submit" class="btn btn-outline-danger"><i class="bi bi-x-circle"></i></button>
                        </form>
                    </td>
                    <td th:text="${#numbers.formatDecimal(item.accessory.price * item.quantity, 2, 2)} + ' RON'"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="d-flex justify-content-end">
        <h3>Total: <span th:text="${#numbers.formatDecimal(totalPrice, 2, 2)} + ' RON'"></span></h3>
    </div>

    <div class="d-flex justify-content-between mt-4">
        <button class="home-page-configurator-button" onclick="window.location.href='/accessories'">Continue
            Shopping
        </button>
        <button class="home-page-configurator-button" onclick="window.location.href='/checkout'">Proceed to
            Checkout
        </button>
    </div>
</div>

<script>
    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
    }

    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
    }
</script>

</body>
</html>