<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Sedan Configurator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://scripts.sirv.com/sirvjs/v3/sirv.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">

    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/section.css">
    <link rel="stylesheet" href="/css/buttons.css">
    <link rel="stylesheet" href="/css/images.css">
    <link rel="stylesheet" href="/css/logo.css">
    <link rel="stylesheet" href="/css/errors.css">

</head>
<body>

<div class="w3-sidebar w3-bar-block w3-border-right left-side-bar" style="display:none" id="mySidebar">
    <button onclick="w3_close()" class="w3-bar-item w3-large" style="background-color: black; color: #BFA181">Close
        &times;
    </button>
    <button onclick="window.location.href='/consumption'" class="side-bar-button">Consumption</button>
    <button onclick="window.location.href='/models'" class="side-bar-button">Models</button>
    <button onclick="window.location.href='/login'" class="side-bar-button">Log In</button>
</div>

<div class="side-bar">
    <button class="side-bar-navigation-button" onclick="w3_open()">☰</button>

    <button onclick="window.location.href='/configurator'" class="side-bar-button">Configurator</button>
    <button onclick="window.location.href='/service'" class="side-bar-button">Service</button>
    <button onclick="window.location.href='/testDrive'" class="side-bar-button">Test-Drive</button>

    <a href="/">
        <img class="logo-img" src="/images/TM-logo-white.png" alt="TM">
    </a>

    <button onclick="window.location.href='/accessories'" class="side-bar-button">Accessories</button>
    <button onclick="window.location.href='/discoverUs'" class="side-bar-button">Discover our history</button>
    <button onclick="window.location.href='/contact'" class="side-bar-button">Contact</button>

    <button onclick="window.location.href='/cart/view'" class="side-bar-cart-button"><i class="bi bi-cart4"></i></button>
</div>

<form th:action="@{/configurator/sedan}" th:object="${carConfiguratorForm}" method="post">

    <div class="main-div">

        <div class="text-block">
            <h1><b>Elyssion Configurator</b><br></h1>
            <p>
                Great choice! Now it's time to personalize your vehicle to match your preferences. Select an exterior color that
                reflects your style, choose an interior design that fits your comfort needs, and pick the engine that delivers
                the performance you expect. Each option helps shape the perfect version of your selected model.
            </p>
        </div>

        <div class="section">
            <div class="left">
                <div class="image-carousel">
                    <button type="button" class="carousel-btn prev" onclick="prevImage()">❮</button>
                    <img id="carouselImage" class="carousel-image"
                         src="https://mariantoma.sirv.com/Elyssion_sedan/black_sedan/1.png" alt="Gallery Image">
                    <button type="button" class="carousel-btn next" onclick="nextImage()">❯</button>
                </div>
            </div>

            <div class="right">
                <div class="exterior-color-div" th:each="exterior : ${availableExteriorOptions}">
                    <label class="custom-radio-button">
                        <input type="radio" class="btn-check" autocomplete="off" checked
                               th:field="*{exteriorColor}" th:value="${exterior.name()}"
                               th:attr="data-color=${exterior.name()}"
                               onclick="changeColorGallery(this.dataset.color); enableSubmit()"
                               required>
                        <span class="btn btn-outline-custom" for="btn-check-custom"
                              th:text="${exterior.description} + ' (' + ${exterior.optionPrice} + ' ' + Euro + ')'"></span>
                    </label>

                    <div th:if="${#fields.hasErrors('exteriorColor')}" class="error">
                        <p th:errors="*{exteriorColor}"></p>
                    </div>

                </div>
            </div>
        </div>

        <div class="section">
            <div class="left">
                <img id="interiorImage" class="Sirv" data-src="https://mariantoma.sirv.com/interior/black.webp"
                     alt="Interior View">
            </div>

            <div class="right">
                <div th:each="interior : ${availableInteriorOptions}">
                    <label>
                        <input type="radio" class="btn-check" autocomplete="off" checked
                               th:field="*{interiorColor}" th:value="${interior.name()}"
                               th:attr="data-color=${interior.name()}"
                               onclick="changeInteriorImage(this.dataset.color); enableSubmit()"
                               required>
                        <span class="btn btn-outline-custom" for="btn-check-custom"
                              th:text="${interior.description} + ' (' + ${interior.optionPrice} + ' ' + Euro + ')'"></span>
                    </label>

                    <div th:if="${#fields.hasErrors('interiorColor')}" class="error">
                        <p th:errors="*{interiorColor}"></p>
                    </div>

                </div>
            </div>
        </div>

        <div class="section">
            <div class="left">
                <img id="engineImage" class="Sirv" src="https://mariantoma.sirv.com/Engine_type/2.0%20TSX.png"
                     alt="Engine View">
            </div>

            <div class="right">
                <div th:each="engine : ${availableEngineTypes}">
                    <label>
                        <input type="radio" class="btn-check" autocomplete="off" checked
                               th:field="*{engineType}" th:value="${engine.name()}"
                               th:attr="data-engine=${engine.name()}"
                               onclick="changeEngineImage(this.dataset.engine); enableSubmit()"
                               required>
                        <span class="btn btn-outline-custom" for="btn-check-custom"
                              th:text="${engine.description} + ' (' + ${engine.optionPrice} + ' ' + Euro + ')'"></span>
                    </label>

                    <div th:if="${#fields.hasErrors('engineType')}" class="error">
                        <p th:errors="*{engineType}"></p>
                    </div>

                </div>
            </div>
        </div>

        <input type="hidden" th:field="*{finalPrice}" th:value="${calculatedFinalPrice}"/>

        <button id="submitButton" class="submit-button" type="submit">Submit</button>
    </div>
</form>

<script src="/js/sedan-configurator.js"></script>

<script>
    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
    }

    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
    }
</script>

</body>
</html>